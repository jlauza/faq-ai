rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Rules for the 'faqs' collection
    match /faqs/{faqId} {

      // Anyone can read the list of FAQs.
      allow read: if true;

      // Anyone can update a FAQ document, but ONLY if they are updating
      // the 'likes' or 'dislikes' fields. This prevents users from
      // changing the question or answer content.
      allow update: if request.resource.data.diff(resource.data).affectedKeys().hasOnly(['likes', 'dislikes']);

      // Disallow creating or deleting FAQs from the client-side for security.
      allow create, delete: if false;
    }
  }
}
